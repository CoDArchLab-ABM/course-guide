{"title":"Implementing output statistics","markdown":{"headingText":"Implementing output statistics","headingAttr":{"id":"pond-trade-stats","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\nApart from minor refactoring, the last implementation steps involve displaying (step 12) and recording (step 13) output statistics. These are essentially aggregate measurements about the state of the simulation at a given time step.\n\n![Pond Trade step 12](assets/screenshots/BlockB_PondTrade_step12_interface-statistics-interface.png)  \n*Pond Trade step 12*\n\n![Pond Trade step 13](assets/screenshots/BlockB_PondTrade_step13_output-statistics-interface.png)  \n*Pond Trade step 13*\n\nThe statistics serve as indicators for monitoring complex results while manually running simulations in the interface. Most importantly, they can be used more systematically as data that can be exported for further use in other software, *e.g.*, to perform advanced statistical analyses and more sophisticated graphs.\n\nHere is how step 13 implements those statistics:\n\n```NetLogo\nglobals\n[\n  routes\n\n  ;;; Output\n  patchesCount\n  coastalLandPatchesCount\n\n  traderCount\n\n  meanTraderCargoValue\n  minTraderCargoValue\n  maxTraderCargoValue\n\n  minSettlementSize\n  maxSettlementSize\n  mainHub\n\n  meanTotalPathCostOfActiveRoutes\n  minTotalPathCostOfActiveRoutes\n  maxTotalPathCostOfActiveRoutes\n\n  meanRedTrait stdDevRedTrait modesRedTrait\n  meanGreenTrait stdDevGreenTrait modesGreenTrait\n  meanBlueTrait stdDevBlueTrait modesBlueTrait\n\n  meanLandTechTrait stdDevLandTechTrait modesLandTechTrait\n  meanPortTechTrait stdDevPortTechTrait modesPortTechTrait\n\n  meanSizeDecayTrait stdDevSizeDecayTrait modesSizeDecayTrait\n  meanStockDecayTrait stdDevStockDecayTrait modesStockDecayTrait\n  meanProductionTrait stdDevProductionTrait modesProductionTrait\n\n  meanFreqOverQualTrait stdDevFreqOverQualTrait modesFreqOverQualTrait\n  meanTransmissionTrait stdDevTransmissionTrait modesTransmissionTrait\n  meanMutationTrait stdDevMutationTrait modesMutationTrait\n]\n\n...\n\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;;; OUTPUT ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\nto update-output\n\n  set coastalLandPatchesCount count patches with [isLand = true and any? neighbors with [isLand = false]]\n\n  let activatedTraders traders with [isActivated]\n\n  set traderCount count activatedTraders\n\n  set meanTraderCargoValue mean [cargoValue] of activatedTraders\n  set minTraderCargoValue min [cargoValue] of activatedTraders\n  set maxTraderCargoValue max [cargoValue] of activatedTraders\n\n  set minSettlementSize min [sizeLevel] of settlements\n  set maxSettlementSize max [sizeLevel] of settlements\n  set mainHub max-one-of settlements [sizeLevel]\n\n  set meanTotalPathCostOfActiveRoutes mean [sum (map [ ?1 -> [pathCost] of ?1 ] route)] of activatedTraders\n  set minTotalPathCostOfActiveRoutes min [sum (map [ ?1 -> [pathCost] of ?1 ] route)] of activatedTraders\n  set maxTotalPathCostOfActiveRoutes max [sum (map [ ?1 -> [pathCost] of ?1 ] route)] of activatedTraders\n\n  set meanRedTrait mean [item 0 culturalVector] of settlements\n  set stdDevRedTrait standard-deviation [item 0 culturalVector] of settlements\n  set modesRedTrait modes [ round (item 0 culturalVector) ] of settlements\n  set meanGreenTrait mean [item 1 culturalVector] of settlements\n  set stdDevGreenTrait standard-deviation [item 1 culturalVector] of settlements\n  set modesGreenTrait modes [ round (item 1 culturalVector) ] of settlements\n  set meanBlueTrait mean [item 2 culturalVector] of settlements\n  set stdDevBlueTrait standard-deviation [item 2 culturalVector] of settlements\n  set modesBlueTrait modes [ round (item 2 culturalVector) ] of settlements\n\n  set meanLandTechTrait mean [item 3 culturalVector] of settlements\n  set stdDevLandTechTrait standard-deviation [item 3 culturalVector] of settlements\n  set modesLandTechTrait modes [ round (relativePathCostInLand + item 3 culturalVector) ] of settlements\n  set meanPortTechTrait mean [item 4 culturalVector] of settlements\n  set stdDevPortTechTrait standard-deviation [item 4 culturalVector] of settlements\n  set modesPortTechTrait modes [ round (relativePathCostInPort + item 4 culturalVector) ] of settlements\n\n  set meanSizeDecayTrait mean [item 5 culturalVector] of settlements\n  set stdDevSizeDecayTrait standard-deviation [item 5 culturalVector] of settlements\n  set modesSizeDecayTrait modes [ round (item 5 culturalVector) ] of settlements\n  set meanStockDecayTrait mean [item 6 culturalVector] of settlements\n  set stdDevStockDecayTrait standard-deviation [item 6 culturalVector] of settlements\n  set modesStockDecayTrait modes [ round (item 6 culturalVector) ] of settlements\n  set meanProductionTrait mean [item 7 culturalVector] of settlements\n  set stdDevProductionTrait standard-deviation [item 7 culturalVector] of settlements\n  set modesProductionTrait modes [ round (item 7 culturalVector) ] of settlements\n\n  set meanFreqOverQualTrait mean [item 8 culturalVector] of settlements\n  set stdDevFreqOverQualTrait standard-deviation [item 8 culturalVector] of settlements\n  set modesFreqOverQualTrait modes [ round (item 8 culturalVector) ] of settlements\n  set meanTransmissionTrait mean [item 9 culturalVector] of settlements\n  set stdDevTransmissionTrait standard-deviation [item 9 culturalVector] of settlements\n  set modesTransmissionTrait modes [ round (item 9 culturalVector) ] of settlements\n  set meanMutationTrait mean [item 10 culturalVector] of settlements\n  set stdDevMutationTrait standard-deviation [item 10 culturalVector] of settlements\n  set modesMutationTrait modes [ round (item 10 culturalVector) ] of settlements\n\nend\n\n```\n\nWe could further implement a procedure to export these and more variables at a specific time of simulations. We will see an example of this in Block C. However, in most cases, we want to use [NetLogo Behavioral Space](https://ccl.northwestern.edu/netlogo/docs/behaviorspace.html). Find it in Tools > Behavior Space. This built-in tool allows you to configure experiments to be run in parallel, within a specific parameter space, and perform a series of commands before, during, or after a simulation run. It includes functionality for exporting simulation data as a CSV file (you will be prompt with a File Explorer window once you press \"run\" in an experiment).\n\nAs the final step in developing PondTrade, let us update our second-tier conceptual model, adding a more explicit representation of cultural vectors and their contents.\n\n![Pond Trade conceptual model at step 13 (second tier)](assets/images/0_conceptAtStep13_secondTier.png)  \n*Pond Trade conceptual model at step 13 (second tier)*\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"svg","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["assets/styles.css"],"output-file":"pond-trade-stats.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.7.32","bibliography":["references.bib"],"comments":{"hypothesis":true},"theme":"lumen"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}